
local Scenes = {}

function Scenes.loadingHandler(progress)

end

function Scenes.loadedHandler(sceneName)
    --加载到下一个场景了，第一步是清理上个场景的ui。
    UIManager.ClearAllPanel();
    if(sceneName == 'main')then
        --显示mainPanel
        local MainPanel = AssetManager.Require('mainpanel.txt')
        local mainPanelGo = UIManager.ShowPanel('main_ui.ab','MainPanel');
        local mainPanel = MainPanel:new(mainPanelGo);
    elseif (sceneName == 'level_1') then
        Scenes.loadGaming_Common();

    end

end

--战斗场景共有的代码
function Scenes.loadGaming_Common()

    local PlayingData = AssetManager.Require('playingdata.txt');
    local globalManager = AssetManager.Require('globalmanager.txt');

    --生成playingData,默认10步
    local playingData = PlayingData:new(10);
    Debug.Log(playingData == nil);

    --随机右上角显示的初始的方向和图案
    playingData:randomDirAndItemType();
    --可以全局访问playingData
    globalManager.playingData = playingData;

    --显示GamingPanel
    local gamingPanelGo = UIManager.ShowPanel('gaming_ui.ab','GamingPanel');
    local GamingPanel = AssetManager.Require('gamingpanel.txt')
    local gamingPanel = GamingPanel:new(gamingPanelGo);
    
end

return Scenes;